!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Typograph=e()}(this,function(){"use strict";["azerty","qwerty"].reduce((t,e)=>(t[e]=e,t),Object.create(null));const t={azerty:["azertyuiop","qsdfghjklm","wxcvbn"],qwerty:["qwertyuiop","asdfghjklz","xcvbnm"]};class e{constructor(t,e,s,i,n,r){this.target=e,this.keyboard=s,this.speed=i,this.mistype=n,this.mistypeRate=r,this.mistypeTag=document.createElement("mistype"),this.text=Array.prototype.slice.call(t)}write(){return t=this,e=void 0,i=function*(){const t=[];for(;this.text.length||t.length;){const e=Math.random(),s=this.speed,i=this.mistype&&this.target.textContent.length&&e<this.mistypeRate;let n=this.target;if(!this.text.length||!i&&t.length)for(;t.length;)this.text.unshift(yield this.removeLetter(s,t.shift()));else{let e=this.text.shift();if(i){n=this.mistypeTag,t.unshift({index:this.target.textContent.length,letter:e});const s=this.keyboard.filter(t=>t.indexOf(e)>=0);console.log(this.keyboard),console.log(s);const i=s.indexOf(e.toLowerCase());e=s[i+(Math.round(Math.random())?1:-1)]}this.target.textContent+=(yield this.typeLetter(s,e))}}return t},new((s=void 0)||(s=Promise))(function(n,r){function o(t){try{h(i.next(t))}catch(t){r(t)}}function a(t){try{h(i.throw(t))}catch(t){r(t)}}function h(t){t.done?n(t.value):new s(function(e){e(t.value)}).then(o,a)}h((i=i.apply(t,e||[])).next())});var t,e,s,i}typeLetter(t,e){return new Promise(s=>setTimeout(()=>s(e),t))}removeLetter(t,e){return new Promise(s=>setTimeout(()=>{this.target.textContent=this.target.textContent.slice(0,-1),s(e.letter)},t))}}return class{constructor(t){this.sequences=[],this.params=Object.assign({},t,{mistype:!!t.mistype,mistypeRate:t.mistypeRate||.3,speed:t.speed||250})}type(t){this.sequences=this.initSequences(),this.sequences.forEach(t=>t.write())}initSequences(){return Array.from(document.querySelectorAll(this.params.selector)).map(s=>{const i=new e(this.params.text||s.getAttribute("data-typeit")||s.textContent||"",s,t[this.params.keyboard||"qwerty"],this.params.speed,this.params.mistype,this.params.mistypeRate);return s.textContent="",i})}}});
//# sourceMappingURL=Typograph.js.map
